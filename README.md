# ApiAuthStrategies

ApiAuthStrategies is an authentication service designed for API handling. It provides built-in rate limiting and supports three types of authentication strategies for testing and integration:

- **Basic Authentication**
- **Bearer Token Authentication**
- **JWT (JSON Web Token) Authentication**

This service allows you to test and implement different authentication mechanisms and includes user rate limiting to help secure your API endpoints.

## Rate Limiting

The service enforces rate limiting on authentication attempts to enhance security and prevent abuse:

- **Admins** are allowed up to **10 attempts per minute** to generate a JWT.
- **Users** are allowed up to **5 attempts per minute** to generate a JWT.

If the rate limit is exceeded, further requests will be rejected with a 429 (Too Many Requests) response until the window resets.

## Authentication Strategies

### Basic Authentication
Basic Authentication transmits credentials as a Base64-encoded string in the `Authorization` header using the format `Basic <base64(username:password)>`. It must be used over HTTPS to avoid exposing credentials.

### Bearer Token Authentication
Bearer Token Authentication uses a token (often opaque) sent in the `Authorization` header as `Bearer <token>`. The server validates the token to authenticate the user. This method is commonly used for API access tokens (users and applications).

### JWT (JSON Web Token) Authentication
JWT Authentication uses a JSON Web Token, which is a signed token containing claims about the user. The token is sent in the `Authorization` header as `Bearer <jwt>`.

#### How JWT is Generated
A JWT is generated by the server after successful authentication (username and password). The server creates a token containing user claims ( user ID, roles, and expiration), signs it with a secret key, and returns it to the client. The structure of a JWT is:

- Header: Specifies the signing algorithm and token type
- Payload: Contains the claims (user data)
- Signature: A cryptographic signature generated using the header, payload, and secret key

The final JWT is a Base64Url-encoded string in the format: `header.payload.signature`.

#### How JWT is Unpacked for a Request
When a client makes a request with a JWT, the server:
1. Extracts the token from the `Authorization` header.
2. Decodes the token to read the header and payload.
3. Verifies the signature using the secret key to ensure the token is valid and untampered.
4. Checks the claims (user roles and expiration) to authorise the request.

If the token is valid and the claims are acceptable, the request is authenticated and processed.